(()=>{const i={};let n=null;const l=(e,o,t)=>{i[e]={selector:o,init:t}},c=()=>{Object.entries(i).forEach(([e,{selector:o,init:t}])=>{document.querySelectorAll(o).forEach(t)})},a=e=>{e.nodeType===Node.ELEMENT_NODE&&Object.entries(i).forEach(([o,{selector:t,init:r}])=>{e.matches(t)&&r(e),e.querySelectorAll(t).forEach(r)})},s=()=>{if(n)return;let e;n=new MutationObserver(o=>{clearTimeout(e),e=setTimeout(()=>{o.forEach(t=>{t.addedNodes.forEach(a)})},50)}),n.observe(document.body,{childList:!0,subtree:!0})},u=()=>{n&&(n.disconnect(),n=null)},d=e=>{const o=i[e];if(!o){console.warn(`Component '${e}' not found in registry`);return}const t=`data-${e}-initialized`;document.querySelectorAll(`[${t}]`).forEach(r=>{r.removeAttribute(t)}),document.querySelectorAll(o.selector).forEach(o.init)},f=()=>{Object.entries(i).forEach(([e,{selector:o}])=>{const t=`data-${e}-initialized`;document.querySelectorAll(`[${t}]`).forEach(r=>{r.removeAttribute(t)})}),c()};window.basecoat={register:l,init:d,initAll:f,start:s,stop:u},typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{c(),s()})})();
