(()=>{const l=["latte","frappe","macchiato","mocha"],v=["frappe","macchiato","mocha"],u=["rosewater","flamingo","pink","mauve","red","maroon","peach","yellow","green","teal","sky","sapphire","blue","lavender"];function w(e){if(!l.includes(e))return{};const a={background:`var(--ctp-${e}-base)`};return u.forEach(c=>{a[c]=`var(--ctp-${e}-${c})`}),a}function f(e,a,c){const n=document.documentElement;l.forEach(o=>n.classList.remove(`theme-${o}`)),u.forEach(o=>n.classList.remove(`accent-${o}`)),n.classList.add(`theme-${e}`),n.classList.add(`accent-${a}`),v.includes(e)?n.classList.add("dark"):n.classList.remove("dark");try{localStorage.setItem("catppuccin-theme",e),localStorage.setItem("catppuccin-accent",a),localStorage.removeItem("basecoat-mode")}catch{}c&&c.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{theme:e,accent:a}}))}function E(){try{const e=localStorage.getItem("catppuccin-theme"),a=localStorage.getItem("catppuccin-accent"),c=localStorage.getItem("basecoat-mode");if(e&&a)f(e,a);else if(c)c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");else{const n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",n)}}catch(e){console.error("Basecoat: Theme initialization failed",e)}}typeof document<"u"&&E();const k=e=>{const a=e.querySelector(".theme-flavors"),c=e.querySelector(".theme-accents"),n=e.querySelector(".theme-reset");let o=localStorage.getItem("catppuccin-theme");(!o||!l.includes(o))&&(o=document.documentElement.classList.contains("dark")?"mocha":"latte"),a&&(a.innerHTML="",a.className="button-group w-full",l.forEach(s=>{const t=document.createElement("button");t.type="button",t.className="btn btn-sm capitalize flex-1",t.textContent=s,t.dataset.flavor=s,a.appendChild(t)}));const p=()=>{if(!a)return;a.querySelectorAll("[data-flavor]").forEach(t=>{t.dataset.flavor===o?(t.classList.remove("btn-outline","btn-ghost"),t.classList.add("btn-primary")):(t.classList.remove("btn-primary"),t.classList.add("btn-ghost"))})},h=()=>{if(!c)return;c.innerHTML="";const s=w(o),t=localStorage.getItem("catppuccin-theme"),d=localStorage.getItem("catppuccin-accent");c.className="theme-accents grid grid-cols-7 gap-3 place-items-center p-4 rounded-xl border border-border/50 mt-4 transition-colors duration-300",c.style.backgroundColor=s.background,u.forEach(m=>{const i=document.createElement("button");i.type="button";const g=d===m&&t===o;if(i.className=`size-6 rounded-full border border-border/20 shadow-sm transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-ring relative flex items-center justify-center ${g?"ring-2 ring-white ring-offset-2 scale-110":""}`,i.title=m,i.style.backgroundColor=s[m],i.dataset.tooltip=m,i.dataset.side="top",g){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class","text-white drop-shadow-sm"),r.style.width="12px",r.style.height="12px",r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-width","3"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round");const b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d","M20 6 9 17l-5-5"),r.appendChild(b),i.appendChild(r)}i.onclick=r=>{r.stopPropagation(),f(o,m,e),p(),h()},c.appendChild(i)})};a&&a.addEventListener("click",s=>{const t=s.target.closest("[data-flavor]");t&&(o=t.dataset.flavor,p(),h())}),n&&n.addEventListener("click",()=>{const s=document.documentElement,t=s.classList.contains("dark");l.forEach(d=>s.classList.remove(`theme-${d}`)),u.forEach(d=>s.classList.remove(`accent-${d}`)),localStorage.removeItem("catppuccin-theme"),localStorage.removeItem("catppuccin-accent"),localStorage.setItem("basecoat-mode",t?"dark":"light"),t?s.classList.add("dark"):s.classList.remove("dark"),o=t?"mocha":"latte",p(),h(),e.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{theme:null,accent:null,mode:t?"dark":"light"}}))}),p(),h(),e.dataset.catppuccinThemeSwitcherInitialized=!0,e.dispatchEvent(new CustomEvent("basecoat:initialized"))};window.basecoat&&window.basecoat.register("catppuccin-theme-switcher",".catppuccin-theme-switcher:not([data-catppuccin-theme-switcher-initialized])",k)})();
